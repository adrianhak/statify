(window.webpackJsonp=window.webpackJsonp||[]).push([["app~ad45398f"],{"03a5":function(t,s,e){"use strict";var a=e("de5e");e.n(a).a},"0418":function(t,s,e){"use strict";var a=(e("4de4"),e("4160"),e("caad"),e("d81d"),e("b64b"),e("ac1f"),e("2532"),e("1276"),e("159b"),e("5530")),i=e("2f62"),l=e("1543"),n={computed:Object(a.a)({activeSettings:{get:function(){var t=this,s=[];return Object.keys(this.$store.state.settings).forEach((function(e){t.settings[e]&&s.push(e)})),s},set:function(t){var s=this,e=Object.keys(this.settings).map((function(e){return s.settings[e]?null:t.includes(e)?e:null})).filter((function(t){return null!=t}))[0];e&&this.$analytics.logEvent("enabled_setting",{setting:e}),"includeFollowed"==e&&this.$store.dispatch("fetchFollowed"),this.$store.commit("TOGGLE_SETTING",t)}},displayName:function(){return l.b.currentUser.displayName.split(" ")[0]}},Object(i.b)({settings:"settings",hasLoaded:"hasLoaded"})),methods:{logout:function(){var t=this;this.$Progress.start(),this.$store.dispatch("logout").then((function(){t.$router.push("/login")}))},isDisabled:function(t){return"playlists"==t||"followedPlaylists"==t?!(this.$store.state.stats[t].length>0):!(this.$store.state.stats[t].total>0)}}},o=(e("f084"),e("2877")),r={name:"Header",components:{Settings:Object(o.a)(n,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"settings-extended"}},[e("div",{staticClass:"navbar-item-item"},[e("div",{staticClass:"settings-title"},[t._v("Sources")]),e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeSettings,expression:"activeSettings"}],staticClass:"switch",attrs:{id:"includePlaylists",type:"checkbox",value:"includePlaylists",disabled:t.isDisabled("playlists")},domProps:{checked:Array.isArray(t.activeSettings)?t._i(t.activeSettings,"includePlaylists")>-1:t.activeSettings},on:{change:function(s){var e=t.activeSettings,a=s.target,i=!!a.checked;if(Array.isArray(e)){var l="includePlaylists",n=t._i(e,l);a.checked?n<0&&(t.activeSettings=e.concat([l])):n>-1&&(t.activeSettings=e.slice(0,n).concat(e.slice(n+1)))}else t.activeSettings=i}}}),e("label",{attrs:{for:"includePlaylists"}},[t._v("Created playlists")])]),e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeSettings,expression:"activeSettings"}],staticClass:"switch",attrs:{id:"includeFollowed",type:"checkbox",value:"includeFollowed",disabled:t.isDisabled("followedPlaylists")},domProps:{checked:Array.isArray(t.activeSettings)?t._i(t.activeSettings,"includeFollowed")>-1:t.activeSettings},on:{change:function(s){var e=t.activeSettings,a=s.target,i=!!a.checked;if(Array.isArray(e)){var l="includeFollowed",n=t._i(e,l);a.checked?n<0&&(t.activeSettings=e.concat([l])):n>-1&&(t.activeSettings=e.slice(0,n).concat(e.slice(n+1)))}else t.activeSettings=i}}}),e("label",{attrs:{for:"includeFollowed"}},[t._v("Followed playlists")])]),e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeSettings,expression:"activeSettings"}],staticClass:"switch",attrs:{id:"includeRecentlyPlayed",type:"checkbox",value:"includeRecentlyPlayed",disabled:t.isDisabled("recentlyPlayed")},domProps:{checked:Array.isArray(t.activeSettings)?t._i(t.activeSettings,"includeRecentlyPlayed")>-1:t.activeSettings},on:{change:function(s){var e=t.activeSettings,a=s.target,i=!!a.checked;if(Array.isArray(e)){var l="includeRecentlyPlayed",n=t._i(e,l);a.checked?n<0&&(t.activeSettings=e.concat([l])):n>-1&&(t.activeSettings=e.slice(0,n).concat(e.slice(n+1)))}else t.activeSettings=i}}}),e("label",{attrs:{for:"includeRecentlyPlayed"}},[t._v("Recently played")])]),e("div",{staticClass:"field"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeSettings,expression:"activeSettings"}],staticClass:"switch",attrs:{id:"includeSaved",type:"checkbox",value:"includeSaved",disabled:t.isDisabled("savedTracks")},domProps:{checked:Array.isArray(t.activeSettings)?t._i(t.activeSettings,"includeSaved")>-1:t.activeSettings},on:{change:function(s){var e=t.activeSettings,a=s.target,i=!!a.checked;if(Array.isArray(e)){var l="includeSaved",n=t._i(e,l);a.checked?n<0&&(t.activeSettings=e.concat([l])):n>-1&&(t.activeSettings=e.slice(0,n).concat(e.slice(n+1)))}else t.activeSettings=i}}}),e("label",{attrs:{for:"includeSaved"}},[t._v("Saved tracks")])]),e("div",{staticClass:"dropdown-divider"}),e("p",{staticStyle:{"margin-bottom":"5px"}},[t._v("Logged in as "),e("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.displayName))])]),e("div",{staticClass:"field"},[e("div",{staticClass:"field is-grouped"},[e("p",{staticClass:"control"},[e("a",{staticClass:"button is-outlined is-primary",on:{click:t.logout}},[t._v(" Log out ")])])])])])])}),[],!1,null,"77a42825",null).exports},computed:{onMainPage:function(){return this.$store.state.hasLoaded&&"/"==this.$route.path}},data:function(){return{windowWidth:window.innerWidth,showSettings:!1}},methods:{navigateTo:function(t){"/"==t&&null==l.b.currentUser?this.$router.push("/login"):this.$route.path==t?window.scrollTo({top:0,behavior:"smooth"}):this.$router.push(t)},donate:function(){this.$analytics.logEvent("clicked_donate"),window.open("https://paypal.com/adrianhak","_blank")},logout:function(){this.$store.dispatch("logout"),this.$router.go()}},mounted:function(){var t=this;this.$nextTick((function(){window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth}))}))},created:function(){var t=this;document.addEventListener("click",(function(s){t.$refs.settingsButton.contains(s.target)||(t.showSettings=!1)}))}},c=(e("86d0"),Object(o.a)(r,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("nav",{staticClass:"navbar is-fixed-top",class:{"is-primary":t.onMainPage},attrs:{role:"navigation"}},[a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-item navbar-logo",on:{click:function(s){return t.navigateTo("/")}}},[t.onMainPage?a("img",{attrs:{src:e("26d8")}}):t._e(),t.onMainPage?t._e():a("img",{attrs:{src:e("9b19")}}),t.windowWidth<600?a("span",{staticClass:"title logo-title beta",class:{"logo-text-white":t.onMainPage}},[t._v("β")]):t._e(),t.windowWidth>600?a("div",{staticClass:"title logo-title",class:{"logo-text-white":t.onMainPage}},[t._v("Statify"),a("span",{staticClass:"beta",class:{"logo-text-white":t.onMainPage}},[t._v("β")])]):t._e()]),a("a",{staticClass:"navbar-item",on:{click:function(s){return t.navigateTo("/faq")}}},[t._v("FAQ")]),a("div",{staticClass:"navbar-end end"},[a("div",{staticClass:"navbar-item donate-button"},[a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control"},[a("a",{staticClass:"button is-outlined is-primary",class:{"is-inverted":t.onMainPage},on:{click:t.donate}},[t._v(" Donate "),a("font-awesome-icon",{staticClass:"donate-icon",attrs:{icon:["fab","paypal"]}})],1)])])]),t.$store.state.initialLoadDone&&"/"==t.$route.path?a("div",{ref:"settingsButton",staticClass:"navbar-item has-dropdown",class:{"is-active":t.showSettings},on:{click:function(s){t.showSettings=!t.showSettings}}},[a("div",{staticClass:"navbar-link is-arrowless"},[a("font-awesome-icon",{attrs:{icon:"sliders-h"}}),a("span",{staticClass:"arrow"},[t.showSettings?t._e():a("font-awesome-icon",{attrs:{icon:"angle-down"}}),t.showSettings?a("font-awesome-icon",{attrs:{icon:"angle-up"}}):t._e()],1)],1),a("div",{staticClass:"navbar-dropdown is-boxed is-right"},[a("settings",{staticClass:"navbar-item"})],1)]):t._e()])])])}),[],!1,null,"2c46c72e",null));s.a=c.exports},"0d9a":function(t,s,e){},"1a4c":function(t,s,e){"use strict";var a=e("87f4"),i={props:{showGlobal:!1,rating:null,globalRating:null,getIcon:null},components:{ICountUp:e.n(a).a}},l=(e("88cb"),e("2877")),n=Object(l.a)(i,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"rating-stat-container"},[t.getIcon?e("transition",{attrs:{name:"toggle",mode:"out-in"}},[t.showGlobal?e("font-awesome-icon",{key:"globe",staticClass:"globe",attrs:{icon:"globe"}}):t._e(),t.getIcon&&!t.showGlobal?e("font-awesome-icon",{key:"mood",staticStyle:{"font-size":"2.5em","margin-right":"0.25em"},attrs:{icon:["far",t.getIcon]}}):t._e()],1):e("transition",{attrs:{name:"expand"}},[t.showGlobal?e("font-awesome-icon",{staticClass:"globe",attrs:{icon:"globe"}}):t._e()],1),e("h1",{staticClass:"rating has-text-black",class:{global:t.showGlobal}},[e("ICountUp",{attrs:{endVal:t.showGlobal?null!=t.globalRating?t.globalRating:0:t.rating,options:{useEasing:!0}}}),t._v("% ")],1)],1)}),[],!1,null,"166d8600",null);s.a=n.exports},2091:function(t,s,e){},"3ac6":function(t,s,e){"use strict";var a=e("c082");e.n(a).a},"3d70":function(t,s,e){"use strict";var a=e("d0340");e.n(a).a},4322:function(t,s,e){},4347:function(t,s,e){},"4dd2":function(t,s,e){"use strict";var a=e("9f38");e.n(a).a},"57da":function(t,s,e){"use strict";var a=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"home-brand"},[a("img",{staticClass:"home-logo",attrs:{src:e("9b19")}}),a("h1",{staticClass:"title home-title"},[t._v("Statify"),a("span",{staticClass:"beta"},[t._v("β")])])])}],i=(e("d81d"),e("ace4"),e("d3b7"),e("5cc6"),e("9a8c"),e("a975"),e("735e"),e("c1ac"),e("d139"),e("3a7b"),e("d5d6"),e("82f8"),e("e91f"),e("60bd"),e("5f96"),e("3280"),e("3fcc"),e("ca91"),e("25a1"),e("cd26"),e("3c5d"),e("2954"),e("649e"),e("219c"),e("170b"),e("b39a"),e("72f7"),{title:"Statify",name:"Home",data:function(){return{loginURL:"https://accounts.spotify.com/authorize?client_id=7fbd4634560a44fa9c7b1ab3deefc68f&redirect_uri=https://statify.adrianh.net/callback&scope=playlist-read-private,user-library-read,user-top-read,user-read-recently-played&response_type=code&show_dialog=true"}},methods:{generateState:function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=new Uint8Array(40);return crypto.getRandomValues(s),s=s.map((function(s){return t.charCodeAt(s%t.length)})),String.fromCharCode.apply(null,s)},login:function(){localStorage.setItem("state",this.generateState()),window.location.href=this.loginURL+"&state="+localStorage.getItem("state")}},created:function(){this.$Progress.finish()}}),l=(e("cb1f"),e("2877")),n=Object(l.a)(i,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"home-content"}},[a("section",{staticClass:"hero"},[a("div",{staticClass:"hero-body"},[t._m(0),a("h2",{staticClass:"subtitle"},[t._v("Your music taste in numbers")]),a("div",{staticClass:"launchpage-buttons"},[a("a",{staticClass:"button is-dark start-btn is-rounded",on:{click:t.login}},[a("img",{staticClass:"spotify-logo",attrs:{width:"30px",src:e("9d64")}}),t._v("Log in with Spotify ")])])])])])}),a,!1,null,"d23f5c60",null);s.a=n.exports},"5c41":function(t,s,e){"use strict";var a=(e("99af"),e("4160"),e("a630"),e("a434"),e("6eba"),e("0d03"),e("3ca3"),e("159b"),e("96cf"),e("1da1")),i=(e("13d5"),e("b64b"),e("e25e"),e("5530")),l=e("2f62"),n=e("d034"),o=e("1a4c"),r={props:{showGlobal:!1},components:{RatingStat:o.a},computed:Object(i.a)({globalRating:function(){return this.$store.state.globalStats.uniqueness}},Object(l.b)({settings:"settings",stats:"stats",hasLoaded:"hasLoaded"})),data:function(){return{popCounter:[],savedPopCounter:[],recentlyPopCounter:[],followedPopCounter:[],playlistPopCounter:[],rating:null}},methods:{avg:function(t){var s=t.reduce((function(t,s){return t+s}),0);return Math.round(100-s/t.length)},updateSaved:function(){var t=this;this.savedPopCounter=[],this.settings.includeSaved&&Object.keys(this.stats.savedTracks.tracks).forEach((function(s){t.savedPopCounter.push(parseInt(t.stats.savedTracks.tracks[s].track.popularity))}))},updateRecently:function(){var t=this;this.recentlyPopCounter=[],this.settings.includeRecentlyPlayed&&Object.keys(this.stats.recentlyPlayed.tracks).forEach((function(s){t.recentlyPopCounter.push(parseInt(t.stats.recentlyPlayed.tracks[s].track.popularity))}))},updateFollowed:function(){var t=this;this.followedPopCounter=[],this.settings.includeFollowed&&this.stats.followedPlaylists.forEach((function(s){Object.keys(s.tracks).forEach((function(e){t.followedPopCounter.push(parseInt(s.tracks[e].track.popularity))}))}))},updatePlaylists:function(){var t=this;this.playlistPopCounter=[],this.$store.state.settings.includePlaylists&&this.stats.playlists.forEach((function(s){Object.keys(s.tracks).forEach((function(e){t.playlistPopCounter.push(parseInt(s.tracks[e].track.popularity))}))}))},update:function(){this.popCounter=[],this.settings.includePlaylists&&(0==this.playlistPopCounter.length&&this.updatePlaylists(),this.popCounter=this.playlistPopCounter),this.settings.includeFollowed&&(0==this.followedPopCounter.length&&this.updateFollowed(),this.popCounter=this.popCounter.concat(this.followedPopCounter)),this.settings.includeSaved&&(0==this.savedPopCounter.length&&this.updateSaved(),this.popCounter=this.popCounter.concat(this.savedPopCounter)),this.settings.includeRecentlyPlayed&&(0==this.recentlyPopCounter.length&&this.updateRecently(),this.popCounter=this.popCounter.concat(this.recentlyPopCounter)),this.rating=this.avg(this.popCounter)},fetchGlobalStats:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=t.$store,s.next=3,Object(n.b)("uniqueness");case 3:s.t1=s.sent,s.t2={stat:"uniqueness",value:s.t1},s.t0.commit.call(s.t0,"SET_GLOBAL_STAT",s.t2);case 6:case"end":return s.stop()}}),s)})))()}},created:function(){this.settings.includeSaved&&this.updateSaved(),this.settings.includeRecentlyPlayed&&this.updateRecently(),this.settings.includeFollowed&&this.updateFollowed(),this.settings.includePlaylists&&this.updatePlaylists(),this.update(),this.$store.state.isCached||0!=this.$store.state.flaggedPlaylists.length||Object(n.e)("uniqueness",this.rating)},watch:{settings:{handler:function(){this.hasLoaded&&this.update()},deep:!0},hasLoaded:function(){this.hasLoaded&&this.update()},showGlobal:function(){this.showGlobal&&null==this.globalRating&&this.fetchGlobalStats()}}},c=e("2877"),d=Object(c.a)(r,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"Uniqueness-container"},[e("portal",{attrs:{to:"Uniqueness"}},[e("p",{staticClass:"card-title"},[t._v("Uniqueness")])]),e("rating-stat",{attrs:{showGlobal:t.showGlobal,rating:t.rating,globalRating:t.globalRating}})],1)}),[],!1,null,null,null).exports,u=(e("d81d"),e("fb6a"),e("4e82"),e("0a63")),h={data:function(){return{topGenres:[],globalGenres:[],currentList:[],genreDict:{}}},props:{pl:null,showGlobal:!1},components:{Carousel:u.Carousel,Slide:u.Slide},computed:Object(l.b)({settings:"settings",stats:"stats",hasLoaded:"hasLoaded"}),methods:{addToDict:function(t){t in this.genreDict?this.genreDict[t]+=1:this.genreDict[t]=1},replaceList:function(){var t=this;this.showGlobal?(this.globalGenres.forEach((function(s,e){t.currentList.splice(e,1,s)})),this.currentList.splice(this.globalGenres.length)):this.showGlobal||(this.topGenres.forEach((function(s,e){t.currentList.splice(e,1,s.genre)})),this.currentList.splice(this.topGenres.length))},update:function(){var t=this;if(this.topGenres=[],this.genreDict={},this.pl){if(this.pl.isPlaceholder)this.topGenres=[];else{this.pl.genres.forEach((function(s){t.addToDict(s)}));var s=[];Object.keys(this.genreDict).forEach((function(e){s.push({genre:e,val:t.genreDict[e]})})),s.sort((function(t,s){return s.val-t.val})),this.topGenres=s.slice(0,5)}this.replaceList()}else{performance.now(),this.settings.includeFollowed&&this.stats.followedPlaylists.forEach((function(s){s.genres.forEach((function(s){t.addToDict(s)}))})),this.settings.includePlaylists&&this.stats.playlists.forEach((function(s){s.genres.forEach((function(s){t.addToDict(s)}))})),this.settings.includeSaved&&this.stats.savedTracks.genres.forEach((function(s){t.addToDict(s)})),this.settings.includeRecentlyPlayed&&this.stats.recentlyPlayed.genres.forEach((function(s){t.addToDict(s)}));var e=[];Object.keys(this.genreDict).forEach((function(s){e.push({genre:s,val:t.genreDict[s]})})),e.sort((function(t,s){return s.val-t.val})),this.topGenres=e,this.replaceList()}},fetchGlobalGenres:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(n.a)();case 2:return t.globalGenres=s.sent,s.abrupt("return");case 4:case"end":return s.stop()}}),s)})))()}},created:function(){this.update(),this.$store.state.isCached||this.pl||0!=this.$store.state.flaggedPlaylists.length||Object(n.d)(this.topGenres.slice(0,10).map((function(t){return t.genre})))},watch:{settings:{handler:function(){!this.pl&&this.hasLoaded&&this.update()},deep:!0},hasLoaded:function(){this.hasLoaded&&!this.pl&&this.update()},pl:function(){this.update()},showGlobal:function(){var t=this;this.showGlobal&&0==this.globalGenres.length&&!this.pl?this.fetchGlobalGenres().then((function(){t.replaceList()})):this.replaceList()}}},p=(e("93e7"),Object(c.a)(h,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"top-genres-container"},[e("portal",{attrs:{to:"Top Genres"}},[e("h1",{staticClass:"card-title"},[t._v("Top Genres")])]),t.pl?e("div",{staticClass:"pl-genres-list top-3"},[e("transition-group",{attrs:{name:"genres-transition",tag:"div"}},t._l(t.currentList.slice(0,5),(function(s,a){return e("div",{key:s,staticClass:"genre-entry",class:{even:a%2,"is-first":0==a,"is-second":1==a,"is-third":2==a}},[e("p",{staticClass:"genre-placement"},[t._v(t._s(a+1))]),e("p",{staticClass:"genre-name"},[t._v(t._s(s))])])})),0)],1):e("div",[t.$root.mobile?e("div",[e("carousel",{attrs:{perPage:1,speed:250,paginationEnabled:!0,paginationPadding:5}},[e("slide",[e("div",{staticClass:"top-3"},[e("transition",{attrs:{name:"globe-fade"}},[t.showGlobal?e("font-awesome-icon",{staticClass:"bg-globe",attrs:{icon:"globe"}}):t._e()],1),e("transition-group",{attrs:{name:"genres-transition",tag:"div"}},t._l(t.currentList.slice(0,3),(function(s,a){return e("div",{key:s,staticClass:"genre-entry",class:{"is-first":0==a,"is-second":1==a,"is-third":2==a}},[e("p",{staticClass:"genre-placement"},[t._v(t._s(a+1))]),e("p",{staticClass:"genre-name"},[t._v(t._s(s))])])})),0)],1)]),e("slide",[e("div",{staticClass:"not-top-3"},[e("transition",{attrs:{name:"globe-fade"}},[t.showGlobal?e("font-awesome-icon",{staticClass:"bg-globe",attrs:{icon:"globe"}}):t._e()],1),e("transition-group",{attrs:{name:"genres-transition",tag:"div"}},t._l(t.currentList.slice(3,10),(function(s,a){return e("div",{key:s,staticClass:"genre-entry"},[e("p",{staticClass:"genre-placement"},[t._v(t._s(a+4))]),e("p",{staticClass:"genre-name"},[t._v(t._s(s))])])})),0)],1)])],1)],1):e("div",{staticClass:"genres-list"},[e("transition",{attrs:{name:"globe-fade"}},[t.showGlobal?e("font-awesome-icon",{staticClass:"bg-globe",staticStyle:{"z-index":"0"},attrs:{icon:"globe"}}):t._e()],1),e("transition-group",{staticClass:"top-3",attrs:{name:"genres-transition",tag:"ol"}},t._l(t.currentList.slice(0,3),(function(s,a){return e("li",{key:s,staticClass:"genre-entry",class:{"is-first":0==a,"is-second":1==a,"is-third":2==a}},[e("p",{staticClass:"genre-placement"},[t._v(t._s(a+1))]),e("p",{staticClass:"genre-name"},[t._v(t._s(s))])])})),0),e("transition-group",{staticClass:"not-top-3",attrs:{name:"genres-transition",tag:"ol"}},t._l(t.currentList.slice(3,10),(function(s,a){return e("li",{key:s,staticClass:"genre-entry"},[e("p",{staticClass:"genre-placement"},[t._v(t._s(a+4))]),e("p",{staticClass:"genre-name"},[t._v(t._s(s))])])})),0)],1)])],1)}),[],!1,null,"ff911c74",null)).exports,f=(e("b0c0"),{data:function(){return{sortedPlaylists:[],sortedFollowed:[],sortedTotal:[]}},computed:Object(i.a)({},Object(l.b)({settings:"settings",stats:"stats",hasLoaded:"hasLoaded"})),methods:{updateFollowed:function(){var t=this;this.sortedFollowed=[],this.settings.includeFollowed&&this.stats.followedPlaylists.forEach((function(s){t.sortedFollowed.push({name:s.name,image:s.image,url:s.url,total:s.total,score:s.popularity/s.tracksAnalyzed})}))},updatePlaylists:function(){var t=this;this.sortedPlaylists=[],this.settings.includePlaylists&&this.stats.playlists.forEach((function(s){t.sortedPlaylists.push({name:s.name,image:s.image,url:s.url,total:s.total,score:s.popularity/s.tracksAnalyzed})}))},update:function(){this.sortedTotal=[],this.settings.includePlaylists&&(0==this.sortedPlaylists.length&&this.updatePlaylists(),this.sortedTotal=this.sortedPlaylists),this.settings.includeFollowed&&(0==this.sortedFollowed.length&&this.updateFollowed(),this.sortedTotal=this.sortedTotal.concat(this.sortedFollowed)),this.sortedTotal.sort((function(t,s){return t.score-s.score}))}},created:function(){this.settings.includeFollowed&&this.updateFollowed(),this.settings.includePlaylists&&this.updatePlaylists(),this.update()},watch:{"settings.includeFollowed":function(){this.hasLoaded&&this.update()},"settings.includePlaylists":function(){this.hasLoaded&&this.update()},hasLoaded:function(){this.hasLoaded&&this.update()}}}),g=(e("802c"),Object(c.a)(f,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"PlaylistPopularity-container"},[e("portal",{attrs:{to:"Most Unique Playlists"}},[e("h1",{staticClass:"card-title"},[t._v("Most Unique Playlists")])]),e("ol",{staticClass:"pl-list"},t._l(t.sortedTotal.slice(0,10),(function(s,a){return e("li",{key:a,staticClass:"pl-entry",class:{even:a%2}},[e("p",{staticClass:"pl-placement"},[t._v(t._s(a+1))]),e("a",{staticClass:"pl-image",attrs:{href:s.url}},[e("img",{attrs:{src:s.image}})]),e("div",{staticClass:"pl-desc"},[e("p",[e("a",{attrs:{href:s.url}},[t._v(t._s(s.name))])]),e("p",{staticClass:"pl-total",staticStyle:{opacity:"0.75","font-size":"0.75em"}},[t._v("Tracks: "+t._s(s.total))])]),e("div",{staticClass:"pop-container"},[t._l(Math.floor((100-s.score)/20),(function(t){return e("div",{staticClass:"pop-bar empty"})})),t._l(Math.ceil(s.score/20),(function(t){return e("div",{staticClass:"pop-bar filled"})}))],2)])})),0)],1)}),[],!1,null,"8ece201a",null)).exports,v=(e("ac1f"),e("1276"),e("1fca")),y={props:{keepRatio:!1,plDatasets:null},methods:{createChart:function(t){this.$data._chart&&this.$data._chart.destroy(),this.renderChart({datasets:t,hoverRadius:0},{responsive:!0,maintainAspectRatio:this.keepRatio,legend:{display:!1},scales:{xAxes:[{ticks:{fontColor:"#FD797A"}}],yAxes:[{ticks:{fontColor:"#378FC8"}}]},tooltips:{callbacks:{title:function(t,s){return s.datasets[t[0].datasetIndex].label},label:function(t,s){var e=[];return e.push("x: "+Math.round(10*t.xLabel)/10),e.push("y: "+Math.round(10*t.yLabel)/10),e}}}})}},extends:v.b,mounted:function(){this.createChart(this.plDatasets)},watch:{plDatasets:function(){this.$data._chart.data.datasets=this.plDatasets,this.$data._chart.update()}}},m={data:function(){return{plDatasets:[],featureList:["danceability","energy","speechiness","acousticeness","instrumentalness","liveness","tempo","valence","explicity"],totalTracks:0,firstActive:!1,secondActive:!1,selectedFeature1:null,selectedFeature2:null}},components:{PlaylistBubbleChart:Object(c.a)(y,void 0,void 0,!1,null,null,null).exports},computed:Object(i.a)({keepRatio:function(){return this.$root.mobile}},Object(l.b)({settings:"settings",stats:"stats",hasLoaded:"hasLoaded"})),methods:{getRandomColor:function(t){var s=t.split("").reduce((function(t,s){return t+s.charCodeAt(0)}),0);return"rgba("+s%255+","+(7*s+50)%255+","+(13*s+100)%255+",0.5)"},getRandomFeatures:function(){var t=Math.floor(Math.random()*this.featureList.length);for(this.selectedFeature1=this.featureList[t],this.selectedFeature2=this.selectedFeature1;this.selectedFeature1===this.selectedFeature2;)t=Math.floor(Math.random()*this.featureList.length),this.selectedFeature2=this.featureList[t]},createDataset:function(){if(this.firstActive=!1,this.secondActive=!1,this.plDatasets=[],this.totalTracks=0,this.settings.includeFollowed)for(var t=0;t<Math.min(10,this.stats.followedPlaylists.length);t+=1)this.totalTracks+=this.stats.followedPlaylists[t].total,this.stats.followedPlaylists[t].features.explicity=this.stats.followedPlaylists[t].explicitTracks/this.stats.followedPlaylists[t].tracksAnalyzed,this.plDatasets.push({label:this.stats.followedPlaylists[t].name,backgroundColor:this.getRandomColor(this.stats.followedPlaylists[t].id),data:[{x:this.stats.followedPlaylists[t].features[this.selectedFeature1],y:this.stats.followedPlaylists[t].features[this.selectedFeature2],r:Math.min(35,this.stats.followedPlaylists[t].total/(this.totalTracks/150))}]});if(this.settings.includePlaylists)for(var s=0;s<Math.min(10,this.stats.playlists.length);s+=1)this.totalTracks+=this.stats.playlists[s].total,this.stats.playlists[s].features.explicity=this.stats.playlists[s].explicitTracks/this.stats.playlists[s].tracksAnalyzed,this.plDatasets.push({label:this.stats.playlists[s].name,backgroundColor:this.getRandomColor(this.stats.playlists[s].id),data:[{x:this.stats.playlists[s].features[this.selectedFeature1],y:this.stats.playlists[s].features[this.selectedFeature2],r:Math.min(35,this.stats.playlists[s].total/(this.totalTracks/150))}]})},selectFeature1:function(t){this.selectedFeature1=t,this.createDataset()},selectFeature2:function(t){this.selectedFeature2=t,this.createDataset()}},created:function(){this.getRandomFeatures(),this.createDataset()},watch:{"settings.includeFollowed":function(){this.hasLoaded&&this.createDataset()},"settings.includePlaylists":function(){this.hasLoaded&&this.createDataset()},hasLoaded:function(){this.hasLoaded&&this.createDataset()}}},b=(e("4dd2"),Object(c.a)(m,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"playlist-comparison-container"},[e("portal",{attrs:{to:"Playlist comparison"}},[e("h1",{staticClass:"card-title compare-title"},[t._v("Compare playlists by "),t.$root.mobile?e("br"):t._e(),e("div",{staticClass:"dropdown is-active",on:{mouseover:function(s){t.firstActive=!0},mouseleave:function(s){t.firstActive=!1}}},[e("div",{staticClass:"dropdown-trigger"},[e("span",{staticClass:"compare-1",attrs:{"aria-controls":"dropdown-menu"}},[t._v(" "+t._s("valence"==t.selectedFeature1?"happiness":t.selectedFeature1)+" "),e("font-awesome-icon",{attrs:{icon:"caret-down"}})],1)]),e("transition",{attrs:{name:"featureSlide"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.firstActive,expression:"firstActive"}],staticClass:"dropdown-menu",attrs:{role:"menu"}},[e("div",{staticClass:"dropdown-content"},t._l(t.stats.features,(function(s,a){return t.selectedFeature1!=s?e("div",{key:a,staticClass:"dropdown-item",on:{click:function(e){return t.selectFeature1(s)}}},[e("div",{staticClass:"title compare-1"},[t._v(t._s("valence"==s?"happiness":s))])]):t._e()})),0)])])],1),t._v(" and "),e("div",{staticClass:"dropdown is-active",on:{mouseover:function(s){t.secondActive=!0},mouseleave:function(s){t.secondActive=!1}}},[e("div",{staticClass:"dropdown-trigger"},[e("span",{staticClass:"compare-2",attrs:{"aria-controls":"dropdown-menu"}},[t._v(" "+t._s("valence"==t.selectedFeature2?"happiness":t.selectedFeature2)+" "),e("font-awesome-icon",{attrs:{icon:"caret-down"}})],1)]),e("transition",{attrs:{name:"featureSlide"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.secondActive,expression:"secondActive"}],staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[e("div",{staticClass:"dropdown-content"},t._l(t.stats.features,(function(s,a){return t.selectedFeature2!=s?e("div",{key:a,staticClass:"dropdown-item",on:{click:function(e){return t.selectFeature2(s)}}},[e("h1",{staticClass:"title compare-2"},[t._v(" "+t._s("valence"==s?"happiness":s))])]):t._e()})),0)])])],1)])]),e("playlist-bubble-chart",{staticClass:"chart",attrs:{plDatasets:t.plDatasets,keepRatio:t.keepRatio}})],1)}),[],!1,null,"776b3a98",null)).exports,w=(e("d3b7"),e("25f0"),{extends:v.a,props:{releaseDateList:null,globalList:null,showGlobal:!1,keepRatio:!1},methods:{createChart:function(){this.$data._chart&&this.$data._chart.destroy(),this.renderChart({datasets:[{data:this.releaseDateList,backgroundColor:"rgba(0, 0, 0, 0.65)"}]},{elements:{line:{tension:0}},responsive:!0,maintainAspectRatio:this.keepRatio,scales:{yAxes:[{scaleLabel:{display:!0,labelString:"% of tracks"},ticks:{beginAtZero:!0}}],xAxes:[{type:"time",stacked:!0,time:{unit:"year"}}]},tooltips:{callbacks:{label:function(t,s){var e=s.datasets[t.datasetIndex].label||"";return e&&(e+=": "),(e+=Math.round(10*t.yLabel)/10)+"%"}}},legend:{display:!1},plugins:{labels:!1}})},minMaxValues:function(){var t=0,s=0;return this.$data._chart.data.datasets.length>1?this.$data._chart.data.datasets[1].hidden?(t=this.releaseDateList[0].x,s=this.releaseDateList[this.releaseDateList.length-1].x):0==this.releaseDateList.length?(t=this.globalList[0].x,s=this.globalList[this.globalList.length-1].x):(t=Math.min(this.globalList[0].x,this.releaseDateList[0].x).toString(),s=Math.max(this.globalList[this.globalList.length-1].x,this.releaseDateList[this.releaseDateList.length-1].x).toString()):(t=this.releaseDateList[0].x,s=this.releaseDateList[this.releaseDateList.length-1].x),[t,s]}},mounted:function(){this.createChart()},watch:{releaseDateList:function(){this.$data._chart.data.datasets[0].data=this.releaseDateList,this.$data._chart.options.scales.xAxes[0].ticks.min=this.minMaxValues[0],this.$data._chart.options.scales.xAxes[0].ticks.max=this.minMaxValues[1],this.$data._chart.update()},showGlobal:function(){this.showGlobal?(1==this.$data._chart.data.datasets.length&&this.$data._chart.data.datasets.push({data:this.globalList,backgroundColor:"rgba(191, 97, 176, 0.7)"}),this.$data._chart.data.datasets[1].hidden=!1):this.$data._chart.data.datasets[1].hidden=!0,this.$data._chart.options.scales.xAxes[0].ticks.min=this.minMaxValues[0],this.$data._chart.options.scales.xAxes[0].ticks.max=this.minMaxValues[1],this.$data._chart.update()}}}),C={props:{pl:null,showGlobal:!1},data:function(){return{releaseDateList:[],totalReleaseDates:{},totalTracks:0,playlists:[],followed:[],saved:[],recently:[],keepRatio:this.$root.mobile||this.pl}},components:{ReleaseDateChart:Object(c.a)(w,void 0,void 0,!1,null,null,null).exports},computed:Object(i.a)({globalList:function(){return this.$store.state.globalStats.releaseDates}},Object(l.b)({settings:"settings",stats:"stats",hasLoaded:"hasLoaded"})),methods:{updateRecently:function(){this.recently=[],this.settings.includeRecentlyPlayed&&(this.recently=this.stats.recentlyPlayed.releaseDates)},updateSaved:function(){this.saved=[],this.settings.includeSaved&&(this.saved=this.stats.savedTracks.releaseDates)},updatePlaylists:function(){var t=this;this.playlists=[],this.settings.includePlaylists&&this.stats.playlists.forEach((function(s){s.releaseDates.forEach((function(s){t.playlists.push(s)}))}))},updateFollowed:function(){var t=this;this.followed=[],this.settings.includeFollowed&&this.stats.followedPlaylists.forEach((function(s){s.releaseDates.forEach((function(s){t.followed.push(s)}))}))},update:function(){var t=this;if(this.releaseDateList=[],this.totalReleaseDates={},this.totalTracks=0,this.pl)this.pl.isPlaceholder||(this.keepRatio=!0,this.totalTracks+=this.pl.tracksAnalyzed,this.pl.releaseDates.forEach((function(s){s in t.totalReleaseDates?t.totalReleaseDates[s]++:t.totalReleaseDates[s]=1})));else{performance.now(),this.releaseDateList=[],this.totalReleaseDates={},this.totalTracks=0;var s=[];this.settings.includePlaylists&&(0==this.playlists.length&&this.updatePlaylists(),s=this.playlists,this.totalTracks+=this.playlists.length),this.settings.includeFollowed&&(0==this.followed.length&&this.updateFollowed(),s=s.concat(this.followed),this.totalTracks+=this.followed.length),this.settings.includeSaved&&(0==this.saved.length&&this.updateSaved(),s=s.concat(this.saved),this.totalTracks+=this.saved.length),this.settings.includeRecentlyPlayed&&(0==this.recently.length&&this.updateRecently(),s=s.concat(this.recently),this.totalTracks+=this.recently.length),s.forEach((function(s){t.totalReleaseDates.hasOwnProperty(s)?t.totalReleaseDates[s]++:t.totalReleaseDates[s]=1}))}Object.keys(this.totalReleaseDates).forEach((function(s){var e=t.totalReleaseDates[s]/t.totalTracks*100;t.releaseDateList.push({x:s.toString(),y:e})})),this.releaseDateList.sort((function(t,s){return t.x-s.x}))},fetchGlobalReleaseDates:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=t.$store,s.next=3,Object(n.c)();case 3:return s.t1=s.sent,s.t2={stat:"releaseDates",value:s.t1},s.t0.commit.call(s.t0,"SET_GLOBAL_STAT",s.t2),s.abrupt("return");case 7:case"end":return s.stop()}}),s)})))()}},created:function(){this.pl||(this.settings.includePlaylists&&this.updatePlaylists(),this.settings.includeFollowed&&this.updateFollowed(),this.settings.includeSaved&&this.updateSaved(),this.settings.includeRecentlyPlayed&&this.updateRecently()),this.update(),this.$store.state.isCached||this.pl||0!=this.$store.state.flaggedPlaylists.length||Object(n.f)(this.totalReleaseDates)},watch:{settings:{handler:function(){!this.pl&&this.hasLoaded&&this.update()},deep:!0},hasLoaded:function(){this.hasLoaded&&!this.pl&&this.update()},pl:function(){this.update()},showGlobal:function(){this.showGlobal&&0==this.globalList.length&&this.fetchGlobalReleaseDates()}}},_=(e("3ac6"),Object(c.a)(C,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"track-release-container"},[e("portal",{attrs:{to:"Release Dates"}},[e("h1",{staticClass:"card-title"},[t._v("Release Dates")])]),e("release-date-chart",{attrs:{showGlobal:t.showGlobal&&0!=t.globalList.length,keepRatio:t.keepRatio,releaseDateList:t.releaseDateList,globalList:t.globalList}})],1)}),[],!1,null,null,null)).exports,k={props:{showGlobal:!1},data:function(){return{happinessRating:0,happy:{followed:0,playlists:0,saved:0,recently:0},totalTracks:{followed:0,playlists:0,saved:0,recently:0}}},components:{RatingStat:o.a},computed:Object(i.a)({getIcon:function(){return this.happinessRating>75?"laugh":this.happinessRating>60?"smile":this.happinessRating>40?"meh":"frown"},globalRating:function(){return this.$store.state.globalStats.happiness}},Object(l.b)({settings:"settings",stats:"stats",hasLoaded:"hasLoaded"})),methods:{updateFollowed:function(){var t=this;this.happy.followed=0,this.totalTracks.followed=0,this.settings.includeFollowed&&this.stats.followedPlaylists.forEach((function(s){t.totalTracks.followed+=s.tracksAnalyzed,Object.keys(s.tracks).forEach((function(e){s.tracks[e].features.valence>=.5&&(t.happy.followed+=1)}))}))},updatePlaylists:function(){var t=this;this.happy.playlists=0,this.totalTracks.playlists=0,this.settings.includePlaylists&&this.stats.playlists.forEach((function(s){t.totalTracks.playlists+=s.tracksAnalyzed,Object.keys(s.tracks).forEach((function(e){s.tracks[e].features.valence>=.5&&(t.happy.playlists+=1)}))}))},updateSaved:function(){var t=this;this.happy.saved=0,this.totalTracks.saved=0,this.settings.includeSaved&&(this.totalTracks.saved+=this.stats.savedTracks.tracksAnalyzed,Object.keys(this.stats.savedTracks.tracks).forEach((function(s){t.stats.savedTracks.tracks[s].features.valence>=.5&&(t.happy.saved+=1)})))},updateRecently:function(){var t=this;this.happy.recently=0,this.totalTracks.recently=0,this.settings.includeRecentlyPlayed&&(this.totalTracks.recently+=this.stats.recentlyPlayed.tracksAnalyzed,Object.keys(this.stats.recentlyPlayed.tracks).forEach((function(s){t.stats.recentlyPlayed.tracks[s].features.valence>=.5&&(t.happy.recently+=1)})))},update:function(){var t=0,s=0;this.settings.includePlaylists&&(0==this.totalTracks.playlists&&this.updatePlaylists(),t+=this.totalTracks.playlists,s+=this.happy.playlists),this.settings.includeFollowed&&(0==this.totalTracks.followed&&this.updateFollowed(),t+=this.totalTracks.followed,s+=this.happy.followed),this.settings.includeSaved&&(0==this.totalTracks.saved&&this.updateSaved(),t+=this.totalTracks.saved,s+=this.happy.saved),this.settings.includeRecentlyPlayed&&(0==this.totalTracks.recently&&this.updateRecently(),t+=this.totalTracks.recently,s+=this.happy.recently),this.happinessRating=Math.round(s/t*100)},fetchGlobalStat:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=t.$store,s.next=3,Object(n.b)("happiness");case 3:s.t1=s.sent,s.t2={stat:"happiness",value:s.t1},s.t0.commit.call(s.t0,"SET_GLOBAL_STAT",s.t2);case 6:case"end":return s.stop()}}),s)})))()}},created:function(){this.settings.includeSaved&&this.updateSaved(),this.settings.includeRecentlyPlayed&&this.updateRecently(),this.settings.includeFollowed&&this.updateFollowed(),this.settings.includePlaylists&&this.updatePlaylists(),this.update(),this.$store.state.isCached||0!=this.$store.state.flaggedPlaylists.length||Object(n.e)("happiness",this.happinessRating)},watch:{settings:{handler:function(){this.hasLoaded&&this.update()},deep:!0},hasLoaded:function(){this.hasLoaded&&this.update()},showGlobal:function(){this.showGlobal&&null==this.globalRating&&this.fetchGlobalStat()}}},P=(e("a198"),Object(c.a)(k,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"happiness-rating-container",class:t.getIcon},[e("portal",{attrs:{to:"Happiness"}},[e("h1",{staticClass:"card-title"},[t._v("Happiness")])]),e("rating-stat",{attrs:{showGlobal:t.showGlobal,rating:t.happinessRating,globalRating:t.globalRating,getIcon:t.getIcon}})],1)}),[],!1,null,"62efa88a",null)).exports,L=e("de1c"),x={props:{featureOrder:null,features:null},methods:{createChart:function(){this.$data._chart&&this.$data._chart.destroy(),this.renderChart({labels:this.featureOrder,datasets:[{data:this.features,backgroundColor:"rgba(191, 97, 176,0.75)"}]},{responsive:!0,maintainAspectRatio:!0,legend:{display:!1},scale:{ticks:{suggestedMax:1}},tooltips:{callbacks:{title:function(t,s){return s.labels[t[0].index]},label:function(t,s){return Math.round(100*s.datasets[t.datasetIndex].data[t.index])+"%"}}}})}},extends:v.c,mounted:function(){this.createChart()},watch:{features:function(){this.$data._chart.data.datasets[0].data=this.features,this.$data._chart.update()}}},S={props:{pl:null},data:function(){return{featureOrder:["danceability","energy","speechiness","liveness","acousticness","happiness"]}},components:{PLFeaturesChart:Object(c.a)(x,void 0,void 0,!1,null,null,null).exports},computed:{featureList:function(){var t=this;if(this.pl.isPlaceholder)return null;var s=[];return this.featureOrder.forEach((function(e){e="happiness"==e?"valence":e,s.push(t.pl.features[e])})),s}}},T=(e("03a5"),Object(c.a)(S,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"pl-features-container"},[e("p-l-features-chart",{attrs:{featureOrder:t.featureOrder,features:t.featureList}})],1)}),[],!1,null,null,null)).exports,$=e("87f4"),D={props:["selectedPL"],components:{ICountUp:e.n($).a},computed:{totalTime:function(){var t=this,s=0;Object.keys(this.selectedPL.tracks).forEach((function(e){s+=Math.round(t.selectedPL.tracks[e].track.duration_ms/1e3)}));var e=Math.round(s/60),a=Math.floor(e/60),i=e%60;return a?i?a+"h "+i+"min":a+"h":i+"min"}}},R=(e("6e25"),Object(c.a)(D,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"pl-quick-stats-container"},[e("div",{staticClass:"pl-quickstats"},[e("nav",{staticClass:"level is-mobile"},[e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"title"},[e("ICountUp",{attrs:{delay:500,endVal:t.selectedPL.total,options:{useEasing:!0}}})],1),e("p",{staticClass:"heading"},[t._v("Tracks")])])]),t.selectedPL.total<=t.selectedPL.trackCap?e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"title"},[t._v(t._s(t.totalTime))]),e("p",{staticClass:"heading"},[t._v("Length")])])]):t._e(),e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"title"},[e("ICountUp",{attrs:{delay:500,endVal:Math.round(t.selectedPL.isPlaceholder?0:t.selectedPL.features.tempo),options:{useEasing:!0}}})],1),e("p",{staticClass:"heading"},[t._v("Avg Tempo")]),e("p")])]),e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"title"},[e("ICountUp",{attrs:{delay:500,endVal:100-Math.round(t.selectedPL.popularity/t.selectedPL.tracksAnalyzed),options:{useEasing:!0}}}),t._v("%")],1),e("p",{staticClass:"heading"},[t._v("Uniqueness")])])]),e("div",{staticClass:"level-item has-text-centered"},[e("div",[e("p",{staticClass:"title"},[e("ICountUp",{attrs:{delay:500,endVal:Math.round(t.selectedPL.explicitTracks/t.selectedPL.tracksAnalyzed*1e3)/10,options:{useEasing:!0}}}),t._v("%")],1),e("p",{staticClass:"heading"},[t._v("Explicity")])])])])])])}),[],!1,null,null,null)).exports,A={data:function(){return{dropdownActive:!1,selectedPL:{name:"",image:"",isPlaceholder:!0},windowWidth:window.innerWidth}},computed:Object(l.b)({stats:"stats",includeFollowed:function(t){return t.settings.includeFollowed},includePlaylists:function(t){return t.settings.includePlaylists},hasLoaded:"hasLoaded",flaggedPlaylists:"flaggedPlaylists"}),components:{TopGenres:p,PLFeatures:T,TrackRelease:_,PlQuickStats:R,Carousel:u.Carousel,Slide:u.Slide},methods:{selectPL:function(t){this.selectedPL=t},update:function(){this.includePlaylists&&this.includeFollowed?this.selectedPL.isPlaceholder&&0!=this.stats.playlists.length&&this.selectPL(this.stats.playlists[0]):this.includePlaylists?(this.selectedPL.isFollowed||this.selectedPL.isPlaceholder)&&0!=this.stats.playlists.length&&this.selectPL(this.stats.playlists[0]):this.includeFollowed?this.selectedPL.isFollowed&&!this.selectedPL.isPlaceholder||0==this.stats.followedPlaylists.length||this.selectPL(this.stats.followedPlaylists[0]):this.selectPL({name:"",image:"",isPlaceholder:!0})}},created:function(){var t=this;this.update(),document.addEventListener("click",(function(s){t.$refs.plDropdown&&((!t.$refs.plDropdown.contains(s.target)||s.target.classList.contains("dropdown-item")||s.target.parentElement.classList.contains("dropdown-item"))&&(t.dropdownActive=!1))}))},watch:{includePlaylists:function(){this.hasLoaded&&this.update()},includeFollowed:function(){this.hasLoaded&&this.update()},hasLoaded:function(){this.hasLoaded&&this.update()}}},E=(e("f411"),Object(c.a)(A,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"playlists-container"},[e("portal",{attrs:{to:"Playlist Quick Facts"}},[e("h1",{staticClass:"card-title"},[t._v("Playlist Quick Facts"),t.$root.mobile?t._e():e("span",[t._v(" - "),e("span",{staticClass:"primary"},[t._v(" "+t._s(t.selectedPL.name))])])])]),e("div",{ref:"plDropdown",staticClass:"dropdown is-active"},[e("div",{staticClass:"dropdown-trigger",on:{click:function(s){t.dropdownActive=!t.dropdownActive}}},[e("button",{staticClass:"button",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[e("div",{staticClass:"selectedPL"},[e("img",{staticStyle:{"margin-right":"5px"},attrs:{width:"25em",src:t.selectedPL.image}}),e("p",[t._v(t._s(t.selectedPL.name))])]),t.dropdownActive?e("font-awesome-icon",{staticStyle:{"margin-left":"3px"},attrs:{icon:"angle-up"}}):e("font-awesome-icon",{staticStyle:{"margin-left":"3px"},attrs:{icon:"angle-down"}})],1)]),e("transition",{attrs:{name:"slideDropdown"}},[t.dropdownActive?e("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[e("div",{staticClass:"dropdown-content"},[t.includePlaylists?e("div",[e("div",{staticClass:"dropdown-item title"},[t._v("Created playlists")]),t._l(t.stats.playlists,(function(s,a){return e("div",{key:s.id,staticClass:"dropdown-item pl-list-item",class:{even:a%2},on:{click:function(e){return t.selectPL(s)}}},[e("img",{staticClass:"pl-image",attrs:{src:s.image}}),e("p",[t._v(t._s(s.name))])])}))],2):t._e(),t.includeFollowed?e("div",[e("div",{staticClass:"dropdown-divider"}),e("div",{staticClass:"dropdown-item title"},[t._v("Followed playlists")]),t._l(t.stats.followedPlaylists,(function(s,a){return e("div",{key:s.id,staticClass:"dropdown-item pl-list-item",class:{even:a%2},on:{click:function(e){return t.selectPL(s)}}},[e("img",{staticClass:"pl-image",attrs:{src:s.image,width:"35em"}}),e("p",[t._v(t._s(s.name))])])}))],2):t._e()])]):t._e()])],1),t.flaggedPlaylists.includes(t.selectedPL)?e("div",{staticClass:"notification is-warning is-light",attrs:{id:"pl-warning"}},[e("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),t._v(" Playlist not properly processed ")],1):t._e(),t.includePlaylists||t.includeFollowed?e("pl-quick-stats",{staticClass:"quickstats",attrs:{selectedPL:t.selectedPL}}):t._e(),t.$root.mobile?t._e():e("div",{staticClass:"chart-titles"},[e("p",[t._v("Top Genres")]),e("p",[t._v("Features")]),e("p",[t._v("Release Dates")])]),t.$root.mobile?t._e():e("div",{staticClass:"pl-graphs"},[e("top-genres",{staticClass:"pl-graph",attrs:{pl:t.selectedPL}}),e("p-l-features",{staticClass:"pl-graph",attrs:{pl:t.selectedPL}}),e("track-release",{staticClass:"pl-graph",attrs:{pl:t.selectedPL}})],1),(t.includePlaylists||t.includeFollowed)&&t.$root.mobile?e("div",[e("carousel",{attrs:{perPage:1,paginationEnabled:!0,speed:250,minSwipeDistance:50}},[e("slide",[e("p",{staticClass:"slide-graph-title"},[t._v("Features")]),e("p-l-features",{staticClass:"pl-graph",attrs:{pl:t.selectedPL}})],1),e("slide",[e("p",{staticClass:"slide-graph-title"},[t._v("Top Genres")]),e("top-genres",{staticClass:"pl-graph",attrs:{pl:t.selectedPL}})],1),e("slide",[e("p",{staticClass:"slide-graph-title"},[t._v("Release Dates")]),e("track-release",{staticClass:"pl-graph",attrs:{pl:t.selectedPL}})],1)],1)],1):t._e(),t.selectedPL.total>t.selectedPL.trackCap?e("p",{staticStyle:{"font-size":"0.7em"}},[e("i",[t._v("Note that only the last "+t._s(t.selectedPL.trackCap)+" tracks were analyzed")])]):t._e()],1)}),[],!1,null,"0758941e",null)).exports,F={props:{terms:null,isTopArtists:!1},data:function(){return{selectedTerm:{label:"6 months",data:Array.from(this.terms.medium.data)}}},components:{Carousel:u.Carousel,Slide:u.Slide},computed:{sliderPages:function(){return this.selectedTerm.data.length%10!=0?(this.selectedTerm.data.length-this.selectedTerm.data.length%10+10)/10:(this.selectedTerm.data.length-this.selectedTerm.data.length%10)/10}},methods:{selectTerm:function(t){var s=this;t.data.forEach((function(t,e){s.selectedTerm.data.splice(e,1,t)})),this.selectedTerm.data.splice(t.data.length),this.selectedTerm.label=t.label}}},G=(e("694b"),Object(c.a)(F,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"toplist-container"},[e("portal",{attrs:{to:t.isTopArtists?"Top Artists":"Top Tracks"}},[e("h1",{staticClass:"card-title"},[t._v(t._s(t.isTopArtists?"Top Artists":"Top Tracks"))])]),e("div",{staticClass:"tabs is-fullwidth is-toggle is-small"},[e("ul",t._l(t.terms,(function(s,a){return e("li",{key:a,class:{"is-active":t.selectedTerm.label===s.label}},[e("a",{on:{click:function(e){return t.selectTerm(s)}}},[t._v(" "+t._s(s.label))])])})),0)]),e("carousel",{attrs:{perPage:1,speed:250,minSwipeDistance:50,paginationEnabled:!0,paginationPadding:5}},t._l(t.sliderPages,(function(s){return e("slide",{key:s},[e("transition-group",{attrs:{name:"toplist"}},t._l(t.selectedTerm.data.slice(10*(s-1),10*(s-1)+10),(function(a,i){return e("div",{key:a.id,staticClass:"entry",class:{even:i%2}},[e("p",{staticClass:"placement"},[t._v(t._s(10*(s-1)+i+1))]),e("a",{staticClass:"entry-image",attrs:{href:a.external_urls.spotify}},[e("img",{attrs:{src:t.isTopArtists?a.images[0].url:a.album.images[0].url}})]),e("div",{staticClass:"entry-desc"},[e("p",[e("a",{attrs:{title:a.name,href:a.external_urls.spotify}},[t._v(t._s(a.name))])]),e("p",{staticClass:"details",attrs:{title:t.isTopArtists?"":a.artists[0].name+" - "+a.album.name}},[t._v(t._s(t.isTopArtists?"":a.artists[0].name+" - "+a.album.name))])]),e("div",{staticClass:"pop-container"},[t._l(Math.floor((100-a.popularity)/10),(function(t){return e("div",{staticClass:"pop-bar empty"})})),t._l(Math.ceil(a.popularity/10),(function(t){return e("div",{staticClass:"pop-bar filled"})}))],2)])})),0)],1)})),1)],1)}),[],!1,null,"6bac44f3",null)).exports,O=e("ae8d"),j=e("ced0"),M={data:function(){return{warningClosed:!1,showArtists:!0}},components:{Uniqueness:d,TopGenres:p,PlaylistPopularity:g,PlaylistComparison:b,TrackRelease:_,HappinessRating:P,Explicity:L.a,Playlists:E,Card:O.a,Carousel:u.Carousel,Toplist:G,Slide:u.Slide},computed:Object(l.b)({hasLoaded:"hasLoaded",initialLoadDone:"initialLoadDone",flaggedPlaylists:"flaggedPlaylists",settings:"settings",totalPLTracks:"totalPLTracks",globalMax:"globalMax",statsx:"stats"}),methods:{calculateCaps:function(t,s){var e=Math.round(t/s.length);if(!(e<=0)){for(var a=s.length-1;a>=0;a--){var i=s[a];i.total-i.trackCap<=e?(t-=i.total-i.trackCap,this.$store.commit("ADD_PL_CAP",{pl:i,cap:i.total}),s.splice(a,1)):(this.$store.commit("ADD_PL_CAP",{pl:i,cap:e}),(t-=e)<=0&&s.splice(a,1))}s.length>0&&this.calculateCaps(t,s)}},startFetching:function(){var t=this;this.$store.dispatch("getPlaylists",{offset:0,data:[]}).then(Object(a.a)(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("probeSavedTracks");case 2:e=Array.from(t.statsx.playlists.concat(t.statsx.followedPlaylists).concat(t.statsx.savedTracks)),t.calculateCaps(Math.min(t.totalPLTracks+(t.statsx.savedTracks.total?t.statsx.savedTracks.total:0),t.globalMax),e),t.statsx.playlists.length/(t.statsx.playlists.length+t.statsx.followedPlaylists.length)<.1&&t.$store.commit("TOGGLE_SETTING",["includeFollowed","includePlaylists","includeSaved","includeRecentlyPlayed"]),t.statsx.playlists.forEach((function(s){t.$store.commit("INCREMENT_QUEUE",{amount:2}),t.$store.dispatch("getPlaylistTracks",{pl:s,offset:s.total<=s.trackCap?0:s.total-s.trackCap})})),t.$store.state.settings.includeFollowed&&(t.$store.commit("PROCESSED_FOLLOWED"),t.statsx.followedPlaylists.forEach((function(s){t.$store.commit("INCREMENT_QUEUE",{amount:2}),t.$store.dispatch("getPlaylistTracks",{pl:s,offset:s.total<=s.trackCap?0:s.total-s.trackCap})}))),t.$store.state.settings.includeSaved&&t.$store.state.stats.savedTracks.total>0?t.$store.dispatch("getSavedTracks",{offset:0,data:[]}):t.$store.commit("PROCESS_SAVED_SUCCESS"),t.$store.state.settings.includeRecentlyPlayed&&t.$store.dispatch("getRecentlyPlayedTracks");case 9:case"end":return s.stop()}}),s)})))).catch((function(s){t.$store.dispatch("logout").then((function(){t.$router.push("/login")}))})),this.$store.dispatch("getToplists",{i:0,type:"topTracks"}),this.$store.dispatch("getToplists",{i:0,type:"topArtists"})},cacheState:function(t,s){var e={state:t,expiry:(new Date).getTime()+1e3*s*60*60};Object(j.c)("state",e).then((function(){})).catch((function(t){}))},retrieveCachedState:function(){return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(j.b)("state").then(function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(s){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==s){t.next=2;break}return t.abrupt("return",{exists:!1});case 2:if(!(Date.now()>s.expiry)){t.next=6;break}return Object(j.a)("state"),t.abrupt("return",{expired:!0,exists:!0});case 6:return t.next=9,Object(j.b)("settings");case 9:return e=t.sent,t.abrupt("return",{state:s.state,settings:e,exists:!0});case 11:case"end":return t.stop()}}),t)})));return function(s){return t.apply(this,arguments)}}());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},created:function(){var t=this;this.retrieveCachedState().then((function(s){s.exists&&!s.expired?(t.$store.commit("INITIALIZE_STATE",{data:s}),t.$spotify.setAccessToken(t.$store.state.accessToken)):!1===s.exists?t.startFetching():s.expired&&t.$store.dispatch("logout").then((function(){t.$router.push("/login")}))}))},watch:{hasLoaded:function(){this.hasLoaded&&(this.$Progress.finish(),this.$store.state.isCached||0!=this.$store.state.flaggedPlaylists.length||this.cacheState(this.$store.state,1))}}},I=(e("3d70"),Object(c.a)(M,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"main-container"}},[e("transition",{attrs:{name:"fade"}},[t.hasLoaded?t._e():e("div",{staticClass:"modal-background"})]),t.hasLoaded?t._e():e("div",{staticClass:"spinner"},[e("div",{staticClass:"rect1"}),e("div",{staticClass:"rect2"}),e("div",{staticClass:"rect3"}),e("div",{staticClass:"rect4"}),e("div",{staticClass:"rect5"})]),e("div",{staticClass:"section"},[t.flaggedPlaylists.length>0&&!t.warningClosed?e("div",{staticClass:"notification is-warning",attrs:{id:"warning-notification"}},[e("button",{staticClass:"delete",on:{click:function(s){t.warningClosed=!t.warningClosed}}}),e("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e("b",[t._v(" Oops..")]),t._v(" "),e("br"),t._v("Something went wrong processing your tracks. Accuracy may or may not be severely impacted. "),e("p",{staticStyle:{"font-size":"0.75em","margin-top":"0.5em"}},[e("i",[e("b",[t._v("Affected playlists:")]),t._v(" "+t._s(t.flaggedPlaylists.map((function(t){return t.name})).join(", ")))])])],1):t._e(),e("transition",{attrs:{name:"slidein"}},[t.initialLoadDone?e("div",[t.$root.mobile?t._e():e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-3"},[e("card",{attrs:{cardID:"uniqueness"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("uniqueness",{attrs:{showGlobal:t.showGlobal}})]}}],null,!1,2175469909)})],1),e("div",{staticClass:"column is-3"},[e("card",{attrs:{cardID:"happinessRating"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("happiness-rating",{attrs:{showGlobal:t.showGlobal}})]}}],null,!1,3193670604)})],1),e("div",{staticClass:"column is-3"},[e("card",{attrs:{cardID:"explicitTracks"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("explicity",{attrs:{showGlobal:t.showGlobal}})]}}],null,!1,1316639554)})],1)]),t.$root.mobile?e("carousel",{staticClass:"quick-facts-swiper",attrs:{perPage:1,scrollPerPage:!0,paginationEnabled:!1,spacePadding:22,speed:250,centerMode:!0}},[e("slide",{staticClass:"slide"},[e("card",{attrs:{cardID:"uniqueness"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("uniqueness",{attrs:{showGlobal:t.showGlobal}})]}}],null,!1,2175469909)})],1),e("slide",{staticClass:"slide"},[e("card",{attrs:{cardID:"happinessRating"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("happiness-rating",{attrs:{showGlobal:t.showGlobal}})]}}],null,!1,3193670604)})],1),e("slide",{staticClass:"slide"},[e("card",{attrs:{cardID:"explicitTracks"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("explicity",{attrs:{showGlobal:t.showGlobal}})]}}],null,!1,1316639554)})],1)],1):t._e()],1):t._e()]),e("transition",{attrs:{name:"slidein-second"}},[t.initialLoadDone?e("div",{staticClass:"stats-container"},[e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-6"},[e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-12"},[e("card",{attrs:{cardID:"topGenres"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("top-genres",{attrs:{showGlobal:t.showGlobal}})]}}],null,!1,1129356675)})],1),e("div",{staticClass:"column is-12"},[e("card",{attrs:{cardID:"yearOfRelease"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("track-release",{attrs:{showGlobal:t.showGlobal}})]}}],null,!1,2205695750)})],1),e("div",{staticClass:"column is-6"},[e("portal",{attrs:{to:"toplistToggle"}},[e("div",{staticClass:"tabs track-artist-toggle is-toggle is-small"},[e("ul",[e("li",{class:{"is-active":t.showArtists}},[e("a",{on:{click:function(s){t.showArtists=!0}}},[t._v("Artists")])]),e("li",{class:{"is-active":!t.showArtists}},[e("a",{on:{click:function(s){t.showArtists=!1}}},[t._v("Tracks")])])])])]),e("card",{directives:[{name:"show",rawName:"v-show",value:t.showArtists,expression:"showArtists"}],attrs:{cardID:"topArtists"}},[t.showArtists?e("toplist",{attrs:{isTopArtists:"true",terms:t.$store.getters.artistTerms}}):t._e()],1),e("card",{directives:[{name:"show",rawName:"v-show",value:!t.showArtists,expression:"!showArtists"}],attrs:{cardID:"topTracks"}},[t.showArtists?t._e():e("toplist",{attrs:{terms:t.$store.getters.trackTerms}})],1)],1),e("div",{staticClass:"column is-6"},[e("card",{attrs:{cardID:"playlistPopularity"}},[e("playlist-popularity")],1)],1)])]),e("div",{staticClass:"column is-6"},[e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-12"},[e("card",{attrs:{cardID:"playlists"}},[e("playlists")],1)],1),e("div",{staticClass:"column is-12"},[e("card",{attrs:{cardID:"comparePlaylists"}},[e("playlist-comparison")],1)],1)])])])]):t._e()])],1)],1)}),[],!1,null,null,null));s.a=I.exports},6903:function(t,s,e){"use strict";var a=e("9174");e.n(a).a},"694b":function(t,s,e){"use strict";var a=e("0d9a");e.n(a).a},"6e25":function(t,s,e){"use strict";var a=e("c1f7");e.n(a).a},"802c":function(t,s,e){"use strict";var a=e("8ff0");e.n(a).a},"86d0":function(t,s,e){"use strict";var a=e("f59c");e.n(a).a},"88cb":function(t,s,e){"use strict";var a=e("fc98");e.n(a).a},"8ff0":function(t,s,e){},9174:function(t,s,e){},"93e7":function(t,s,e){"use strict";var a=e("4322");e.n(a).a},"9f38":function(t,s,e){},a198:function(t,s,e){"use strict";var a=e("cd2a");e.n(a).a},c082:function(t,s,e){},c1f7:function(t,s,e){},cb1f:function(t,s,e){"use strict";var a=e("2091");e.n(a).a},cd2a:function(t,s,e){},d0340:function(t,s,e){},dcf5:function(t,s,e){},de5e:function(t,s,e){},f084:function(t,s,e){"use strict";var a=e("4347");e.n(a).a},f411:function(t,s,e){"use strict";var a=e("dcf5");e.n(a).a},f59c:function(t,s,e){},fc98:function(t,s,e){},fd2d:function(t,s,e){"use strict";var a=(e("6903"),e("2877")),i=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"footer-container"},[e("div",{staticClass:"content has-text-centered"},[e("p",[t._v(" Made by "),e("a",{attrs:{href:"mailto:adrian@adrianh.net"}},[t._v("Adrian Håkansson")]),t._v(" | Powered by "),e("a",{attrs:{href:"https://spotify.com"}},[t._v("Spotify")]),e("br"),t._v(" © 2020 | "),e("a",{attrs:{href:"mailto:adrian@adrianh.net"}},[t._v("Feedback")]),t._v(" | "),e("a",{on:{click:function(s){return t.$router.push("/faq")}}},[t._v("FAQ")]),t._v(" | "),e("a",{attrs:{href:"https://github.com/adrianhak/statify"}},[t._v("GitHub")]),t._v(" | "),e("a",{attrs:{href:"https://paypal.me/adrianhak",target:"_blank"}},[t._v("Donate")])])])])])}),[],!1,null,"2943674a",null);s.a=i.exports}}]);